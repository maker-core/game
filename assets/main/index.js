System.register("chunks:///_virtual/app.ts",["cc","./ResMgr.ts","./Message.ts"],(function(e){var s,t,n,a,c;return{setters:[function(e){s=e.cclegacy,t=e.find,n=e.instantiate},function(e){a=e.ResMgr},function(e){c=e.Message}],execute:function(){s._RF.push({},"8d593AQkSdEFYxZSVYq20cQ","app",void 0);e("Tost",(e=>{let s=t("Mian/Canvas");s||(s=t("Canvas"));const i=a.Instance.getAsset("Sounds","Message"),o=n(i);if(!s.getChildByName("Message")){s.addChild(o);o.getComponent(c).setValue(e)}}));s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["cc","./ResMgr.ts"],(function(s){var o,t,n,u;return{setters:[function(s){o=s.cclegacy,t=s.Component,n=s.AudioSource},function(s){u=s.ResMgr}],execute:function(){o._RF.push({},"dfc68ApNu9H27Pz05ghRcER","AudioMgr",void 0);class e extends t{constructor(){super(...arguments),this.sounds={}}onLoad(){e.Instance?this.destroy():e.Instance=this}play(s,o){if(!this.sounds[s]){const o=u.Instance.getAsset("Sounds",`${s}`),t=new n(s);t.clip=o,this.sounds[s]=t}o.loop&&(this.sounds[s].loop=o.loop),o.playOnAwake&&(this.sounds[s].playOnAwake=o.playOnAwake),o.volume&&(this.sounds[s].volume=o.volume),this.sounds[s].play()}pause(s){this.sounds[s]&&this.sounds[s].pause()}stop(s){this.sounds[s]&&this.sounds[s].stop()}stopAll(){for(let s in this.sounds)this.sounds[s].stop()}getAudioSourceByName(s){if(this.sounds[s])return this.sounds[s];console.error(`${s} 不存在`)}}s("AudioMgr",e),e.Instance=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/BulletFrame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiMgr.ts","./AudioMgr.ts"],(function(e){var t,i,n,o,r,a,s,c,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.SpriteFrame,r=e._decorator,a=e.Node,s=e.Label,c=e.Sprite},function(e){l=e.UICtrl},function(e){p=e.AudioMgr}],execute:function(){var u,m,h,g,b,d,v,f,y;n._RF.push({},"cdf2eac9r1DIJdgYX9SjOO8","BulletFrame",void 0);const{ccclass:k,property:w}=r;e("BulletFrame",(u=k("BulletFrame"),m=w(o),h=w(o),g=w(o),u((v=t((d=class extends l{constructor(){super(...arguments),i(this,"icon1",v,this),i(this,"icon2",f,this),i(this,"icon3",y,this),this.type=1}onLoad(){super.onLoad(),this.view["mask/close"].on(a.EventType.TOUCH_END,(e=>{e.propagationStopped=!0,p.Instance.play("djClick",{playOnAwake:!0}),this.node.active=!1}))}close(){this.node.active=!1}setType(e){switch(this.type=e,e){case 1:this.view["mask/title/Label"].getComponent(s).string="Remove",this.view["mask/cal/icon"].getComponent(c).spriteFrame=this.icon1,this.view["mask/Label"].getComponent(s).string="Remove 3 objects from the grid and place them in the temporary storage.";break;case 2:this.view["mask/title/Label"].getComponent(s).string="Scrape",this.view["mask/cal/icon"].getComponent(c).spriteFrame=this.icon2,this.view["mask/Label"].getComponent(s).string="Automatically gather and place objects together";break;case 3:this.view["mask/title/Label"].getComponent(s).string="Disruption",this.view["mask/cal/icon"].getComponent(c).spriteFrame=this.icon3,this.view["mask/Label"].getComponent(s).string="Disrupt the pile of items"}}update(e){}}).prototype,"icon1",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(d.prototype,"icon2",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(d.prototype,"icon3",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=d))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"5fb11dsqL9C1JmVA7jcjYFI","config",void 0);e("baseUrl1","");let c=e("baseUrl","");c=e("baseUrl","https://flaskfi.xyz/game/"),t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,h,g,a,c,p,C,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,s=t._decorator,l=t.Component,r=t.Color,h=t.Canvas,g=t.UITransform,a=t.instantiate,c=t.Label,p=t.RichText,C=t.Toggle,d=t.Button,m=t.director}],execute:function(){var u,L,M,b,T,f,x,S,E;i._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);const{ccclass:v,property:I}=s;t("DebugViewRuntimeControl",(u=v("internal.DebugViewRuntimeControl"),L=I(n),M=I(n),b=I(n),u((x=e((f=class extends l{constructor(){super(...arguments),o(this,"compositeModeToggle",x,this),o(this,"singleModeToggle",S,this),o(this,"EnableAllCompositeModeButton",E,this),this._single=0,this.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],this.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],this.strMisc=["CSM Layer Coloration","Lighting With Albedo"],this.compositeModeToggleList=[],this.singleModeToggleList=[],this.miscModeToggleList=[],this.textComponentList=[],this.labelComponentList=[],this.textContentList=[],this.hideButtonLabel=void 0,this._currentColorIndex=0,this.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],this.color=[r.WHITE,r.BLACK,r.RED,r.GREEN,r.BLUE]}start(){if(!this.node.parent.getComponent(h))return void console.error("debug-view-runtime-control should be child of Canvas");const t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height;let i=.1*e-e,n=o-.1*o;const s=this.node.getChildByName("MiscMode"),l=a(s);l.parent=this.node,l.name="Buttons";const m=a(s);m.parent=this.node,m.name="Titles";for(let t=0;t<2;t++){const e=a(this.EnableAllCompositeModeButton.getChildByName("Label"));e.setPosition(i+(t>0?450:150),n,0),e.setScale(.75,.75,.75),e.parent=m;const o=e.getComponent(c);o.string=t?"----------Composite Mode----------":"----------Single Mode----------",o.color=r.WHITE,o.overflow=0,this.labelComponentList[this.labelComponentList.length]=o}n-=20;let u=0;for(let t=0;t<this.strSingle.length;t++,u++){t===this.strSingle.length>>1&&(i+=200,u=0);const e=t?a(this.singleModeToggle):this.singleModeToggle;e.setPosition(i,n-20*u,0),e.setScale(.5,.5,.5),e.parent=this.singleModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strSingle[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[t]=e}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(d.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;let L=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=L;const M=a(this.EnableAllCompositeModeButton);M.setPosition(i+90,n,0),M.setScale(.5,.5,.5),M.on(d.EventType.CLICK,this.changeTextColor,this),M.parent=l,L=M.getComponentInChildren(c),L.string="TextColor",this.labelComponentList[this.labelComponentList.length]=L;const b=a(this.EnableAllCompositeModeButton);b.setPosition(i+200,n,0),b.setScale(.5,.5,.5),b.on(d.EventType.CLICK,this.hideUI,this),b.parent=this.node.parent,L=b.getComponentInChildren(c),L.string="Hide UI",this.labelComponentList[this.labelComponentList.length]=L,this.hideButtonLabel=L,n-=40;for(let t=0;t<this.strMisc.length;t++){const e=a(this.compositeModeToggle);e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=s;const o=e.getComponentInChildren(p);o.string=this.strMisc[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string;e.getComponent(C).isChecked=!!t,e.on(C.EventType.TOGGLE,t?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[t]=e}n-=150;for(let t=0;t<this.strComposite.length;t++){const e=t?a(this.compositeModeToggle):this.compositeModeToggle;e.setPosition(i,n-20*t,0),e.setScale(.5,.5,.5),e.parent=this.compositeModeToggle.parent;const o=e.getComponentInChildren(p);o.string=this.strComposite[t],this.textComponentList[this.textComponentList.length]=o,this.textContentList[this.textContentList.length]=o.string,e.on(C.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[t]=e}}isTextMatched(t,e){let o=new String(t);const i=o.search(">");return-1===i?t===e:(o=o.substr(i+1),o=o.substr(0,o.search("<")),o===e)}toggleSingleMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let t=0;t<this.strSingle.length;t++)this.isTextMatched(o.string,this.strSingle[t])&&(e.singleMode=t)}toggleCompositeMode(t){const e=m.root.debugView,o=t.getComponentInChildren(p);for(let i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)}toggleLightingWithAlbedo(t){m.root.debugView.lightingWithAlbedo=t.isChecked}toggleCSMColoration(t){m.root.debugView.csmLayerColoration=t.isChecked}enableAllCompositeMode(t){const e=m.root.debugView;e.enableAllCompositeMode(!0);for(let t=0;t<this.compositeModeToggleList.length;t++){this.compositeModeToggleList[t].getComponent(C).isChecked=!0}let o=this.miscModeToggleList[0].getComponent(C);o.isChecked=!1,e.csmLayerColoration=!1,o=this.miscModeToggleList[1].getComponent(C),o.isChecked=!0,e.lightingWithAlbedo=!0}hideUI(t){const e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"}changeTextColor(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(let t=0;t<this.textComponentList.length;t++)this.textComponentList[t].string=this.strColor[this._currentColorIndex]+this.textContentList[t]+"</color>";for(let t=0;t<this.labelComponentList.length;t++)this.labelComponentList[t].color=this.color[this._currentColorIndex]}onLoad(){}update(t){}}).prototype,"compositeModeToggle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(f.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(f.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["cc"],(function(n){var e,t,s;return{setters:[function(n){e=n.cclegacy,t=n.Component,s=n.EventTarget}],execute:function(){e._RF.push({},"a0520KQvgVIhr8MfV5+NVnO","EventMgr",void 0);class c extends t{onLoad(){c.Instance?this.destroy():c.Instance=new s}}n("EventMgr",c),c.Instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["cc","./ResMgr.ts","./AudioMgr.ts","./EventMgr.ts","./GameFiMgr.ts"],(function(n){var t,e,o,a,s,i,d;return{setters:[function(n){t=n.cclegacy,e=n._decorator,o=n.Component},function(n){a=n.ResMgr},function(n){s=n.AudioMgr},function(n){i=n.EventMgr},function(n){d=n.GameFiMgr}],execute:function(){var r,c;t._RF.push({},"b0fb1qHVZZJ2ryeBmIZ5PQb","GameData",void 0);const{ccclass:m}=e;n("GameData",m("GameData")(((c=class n extends o{onLoad(){if(n.Instance)return void this.destroy();n.Instance=this,this.node.addComponent(a),this.node.addComponent(s),this.node.addComponent(i),this.node.addComponent(d);const t=window?.Telegram?.WebApp;t&&(t?.ready(),t?.expand(),t.isClosingConfirmationEnabled=!0)}}).Instance=void 0,r=c))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameFiMgr.ts",["cc","./index4.ts","./EventMgr.ts"],(function(t){var n,e,o,s,c,a,i,r;return{setters:[function(t){n=t.cclegacy,e=t.Component,o=t.sys},function(t){s=t.TonConnectUI,c=t.GameFi,a=t.Address,i=t.toNano},function(t){r=t.EventMgr}],execute:function(){n._RF.push({},"aad960tLrFGW6F0FqomlQl4","GameFiMgr",void 0);class d extends e{constructor(){super(...arguments),this._cocosGameFi=void 0,this._connectUI=void 0,this._bTonInit=!1,this.address=""}onLoad(){d.Instance?this.destroy():(d.Instance=this,this.initTonConnect())}async tgLoadPromise(){return new Promise(((t,n)=>{if(o.platform===o.Platform.MOBILE_BROWSER||o.platform===o.Platform.DESKTOP_BROWSER){const e=document.createElement("script");e.src="https://telegram.org/js/telegram-web-app.js",e.async=!0,e.onload=()=>{const n=setInterval((()=>{window.Telegram&&window.Telegram.WebApp&&(t(window.Telegram.WebApp),clearInterval(n))}),100)},e.onerror=()=>n(new Error("Unable to load TelegramWebApp SDK, please check logs.")),document.head.appendChild(e)}}))}async initTonConnect(){let t=new s({manifestUrl:"https://ton-connect.github.io/demo-dapp-with-wallet/tonconnect-manifest.json"});this._cocosGameFi=await c.create({network:"mainnet",connector:t,merchant:{jettonAddress:a.parse("EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs"),tonAddress:"UQAMNl5M8dv_x5gEjAGzmARBUaey6qME2zwghgk0Jbd6kZB0"}}),this._connectUI=this._cocosGameFi.walletConnector;this._connectUI.onModalStateChange((t=>{console.log("model state changed! : "),this.updateConnect()})),this._connectUI.onStatusChange((t=>{console.log("wallet info status changed : "),this.updateConnect(),r.Instance.emit("wallet",t)}));this._bTonInit=!0,this.updateConnect(),await this.tgLoadPromise()}isConnected(){return this._connectUI?this._connectUI.connected:(console.error("ton ui not inited!"),!1)}updateConnect(){if(this.isConnected()){const t=this._connectUI.account.address;this.address=t}else console.log("wallet not connected")}async openModal(){this._bTonInit&&(this.isConnected()?this._connectUI.disconnect():this._connectUI.openModal())}async sendTransaction(t){return await this._cocosGameFi.transferJetton({to:a.parse("UQCXLI7EllDjQEFRglhfKi42hlZwyvYN-IKXM6nAc52_nZQp"),amount:i(t)})}start(){}}t("GameFiMgr",d),d.Instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc"],(function(t){var e,p,a;return{setters:[function(t){e=t.cclegacy,p=t.Prefab,a=t.AudioClip}],execute:function(){e._RF.push({},"575f06Qf8dBlrkz2fzrc3qq","index",void 0);t("resPkg",{GUI:{urls:[{tooTip:"u",type:"0",path:"eggcoin",assetType:p},{tooTip:"1",type:"0",path:"Breakfast_Sandwich",assetType:p},{tooTip:"2",type:"0",path:"Burger_Wrapped",assetType:p},{tooTip:"3",type:"0",path:"Croissant_Dough",assetType:p},{tooTip:"t",type:"1",path:"usdc",assetType:p},{tooTip:"4",type:"1",path:"IceCream",assetType:p},{tooTip:"5",type:"1",path:"Ketchup_Cup",assetType:p},{tooTip:"6",type:"1",path:"Waffle_Plain",assetType:p},{tooTip:"7",type:"1",path:"Chip_Bag",assetType:p},{tooTip:"8",type:"1",path:"Corndog",assetType:p},{tooTip:"9",type:"2",path:"Loaf_Cinnamon",assetType:p},{tooTip:"a",type:"2",path:"Loaf_White",assetType:p},{tooTip:"b",type:"2",path:"Wreath_Light",assetType:p},{tooTip:"c",type:"2",path:"ToGo_Bag_W",assetType:p}]},Sounds:{urls:[{path:"app",assetType:a},{path:"bg",assetType:a},{path:"djClick",assetType:a},{path:"mdl",assetType:a},{path:"mianbao",assetType:a},{path:"other",assetType:a},{path:"qian",assetType:a},{path:"token",assetType:a},{path:"win",assetType:a},{path:"xiaoshi",assetType:a},{path:"Message",assetType:p},{path:"Loading",assetType:p}]}});e._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./moment.mjs_cjs=&original=.js","./moment.js"],(function(t){var n,o;return{setters:[function(t){n=t.cclegacy},null,function(t){o=t.default}],execute:function(){t({addSeparatorToNumber:function(t,n){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,n)},countdown:function(t,n){const e=n,r=o.duration(e.diff(t));if(r.asMilliseconds()<=0)return{end:!0};const s=Math.floor(r.asDays()),u=Math.floor(r.hours()),a=Math.floor(r.minutes())>9?Math.floor(r.minutes()):`0${Math.floor(r.minutes())}`,i=Math.floor(r.seconds())>9?Math.floor(r.seconds()):`0${Math.floor(r.seconds())}`;return{days:s,hours:u,minutes:a,seconds:i,end:!1}},debounce:function(t,n){let o=null;return function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];o&&clearTimeout(o),o=setTimeout((()=>{t.apply(this,r)}),n)}},getRandom:function(t,n){return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t}}),n._RF.push({},"75244sNKmhGJIbha+4+BzAW","index",void 0);t("keyObject",(t=>{let n="";for(let o in t)n+=o+"="+t[o]+"&";return""!==n&&(n=n.substr(0,n.lastIndexOf("&"))),n}));n._RF.pop()}}}));

System.register("chunks:///_virtual/index3.ts",["cc","./request.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.default}],execute:function(){e({buyPropProduct:function(e){return n({data:e||null,method:"GET",url:"game/buyPropProduct"})},gameOver:function(e){return n({data:e||null,method:"POST",url:"game/gameOver"})},generateModelSorting:function(e){return n({data:e||null,method:"GET",url:"rule/generateModelSorting"})},getGameUserInfo:function(e){return n({data:e||null,method:"GET",url:"gameUser/getGameUserInfo"})},getPrice:function(e){return n({data:e||null,method:"GET",url:"getPrice"})},openNewGame:function(e){return n({data:e||null,method:"GET",url:"game/openNewGame"})},postTest:function(e){return n({data:e||null,method:"POST",url:"postTest"})}}),t._RF.push({},"c657fQy5bpLFLenBmom+S00","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,r,s,n,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,r=t.Vec3,s=t._decorator,n=t.Component,a=t.RigidBody,c=t.Collider}],execute:function(){var l,d,p,u,m,h,y;i._RF.push({},"b08a3qMqrRKXaTPZOtmmSw2","Item",void 0);const{ccclass:f,property:g}=s;t("Item",(l=f("Item"),d=g(r),p=g(r),l((h=e((m=class extends n{constructor(){super(...arguments),this.removed=!1,this.removedPos=void 0,this.playRmovedEff=!1,this.isTemp=!1,this.isBottom=!1,o(this,"rotation",h,this),o(this,"scale",y,this)}start(){}setUseGravity(t){const e=this.node.getComponent(a);e&&(e.useGravity=t)}setWorldPosition(t){let e=this.node.getWorldPosition();e.y+=t,this.node.setWorldPosition(e)}destoryCollider(){if(!this.isTemp){const t=this.node.getComponent(a);this.node.getComponent(c).isTrigger=!0,t&&t.destroy()}}update(t){}}).prototype,"rotation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r(0,0,0)}}),y=e(m.prototype,"scale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r(1,1,1)}}),u=m))||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["cc","./UiMgr.ts"],(function(o){var t,n,e,a;return{setters:[function(o){t=o.cclegacy,n=o.Node,e=o._decorator},function(o){a=o.UICtrl}],execute:function(){var c;t._RF.push({},"263215wGV9AUaXxJ2fN4u9j","Loading",void 0);const{ccclass:s,property:r}=e;o("Loading",s("Loading")(c=class extends a{onLoad(){super.onLoad()}start(){this.node.on(n.EventType.TOUCH_END,(async o=>{o.propagationStopped=!0}))}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./BulletFrame.ts","./Loading.ts","./Message.ts","./config.ts","./index.ts","./GameData.ts","./Item.ts","./Main.ts","./Play.ts","./Start.ts","./RankingList.ts","./AudioMgr.ts","./EventMgr.ts","./GameFiMgr.ts","./ResMgr.ts","./UiMgr.ts","./app.ts","./index2.ts","./request.ts","./storage.ts","./type.ts","./index3.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiMgr.ts","./index.ts","./ResMgr.ts","./AudioMgr.ts","./Item.ts","./index2.ts","./moment.mjs_cjs=&original=.js","./app.ts","./BulletFrame.ts","./index3.ts","./index.mjs_cjs=&original=.js","./storage.ts","./GameFiMgr.ts","./index.js","./moment.js"],(function(e){var t,i,n,s,a,o,l,h,r,c,m,p,u,d,g,v,C,y,w,T,f,b,I,O,k,S,P,_,E,N,A,D,M,L,U,G,B,R,F,x,H,j;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Material,a=e.SpriteFrame,o=e.Prefab,l=e._decorator,h=e.sp,r=e.Sprite,c=e.Label,m=e.game,p=e.director,u=e.instantiate,d=e.Vec3,g=e.RigidBody,v=e.input,C=e.Input,y=e.Camera,w=e.geometry,T=e.PhysicsSystem,f=e.MeshRenderer,b=e.ProgressBar,I=e.tween,O=e.Tween,k=e.Node},function(e){S=e.UICtrl},function(e){P=e.resPkg},function(e){_=e.ResMgr},function(e){E=e.AudioMgr},function(e){N=e.Item},function(e){A=e.getRandom,D=e.countdown},null,function(e){M=e.Tost},function(e){L=e.BulletFrame},function(e){U=e.generateModelSorting,G=e.openNewGame,B=e.gameOver,R=e.buyPropProduct},null,function(e){F=e.getStorageData},function(e){x=e.GameFiMgr},function(e){H=e.default},function(e){j=e.default}],execute:function(){var z,$,W,q,V,X,Z,J,K,Q,Y,ee,te,ie,ne;n._RF.push({},"a7d6dXfqilInpZcCfgaVlXs","Main",void 0);const{ccclass:se,property:ae}=l,{SkeletonData:oe}=h;e("Main",(z=se("Main"),$=ae(s),W=ae(a),q=ae(a),V=ae(o),X=ae(oe),Z=ae(oe),z((Q=t((K=class extends S{constructor(){super(...arguments),i(this,"material",Q,this),i(this,"tag",Y,this),i(this,"add",ee,this),i(this,"nft",te,this),i(this,"usdc",ie,this),i(this,"coin",ne,this),this.touchNode=null,this.allItem=[],this.collectPos=[],this.collectTiles=[],this.touchMaterial=null,this.temporaryItem=[],this.temporaryPos=[],this.currentLevel=1,this.gameStop=!1,this.clickPlay=!0,this.stage1=0,this.stage2=0,this.stage3=0,this.count=9,this.InitializedData=[],this.usdtCount=0,this.myCoinCount=0,this.gameDate=null,this.isGameOver=!1,this.targetTime=null,this.timeStopMoment=null,this.timeStop=!1,this.continue=!0}changeTag(){0==this.stage1?(this.view["Canvas/ui/bottom/button/add"].getComponent(r).spriteFrame=this.add,this.view["Canvas/ui/bottom/button/add/Label"].getComponent(c).string=""):(this.view["Canvas/ui/bottom/button/add"].getComponent(r).spriteFrame=this.tag,this.view["Canvas/ui/bottom/button/add/Label"].getComponent(c).string=`${this.stage1}`),0==this.stage2?(this.view["Canvas/ui/bottom/button1/add"].getComponent(r).spriteFrame=this.add,this.view["Canvas/ui/bottom/button1/add/Label"].getComponent(c).string=""):(this.view["Canvas/ui/bottom/button1/add"].getComponent(r).spriteFrame=this.tag,this.view["Canvas/ui/bottom/button1/add/Label"].getComponent(c).string=`${this.stage2}`),0==this.stage3?(this.view["Canvas/ui/bottom/button2/add"].getComponent(r).spriteFrame=this.add,this.view["Canvas/ui/bottom/button2/add/Label"].getComponent(c).string=""):(this.view["Canvas/ui/bottom/button2/add"].getComponent(r).spriteFrame=this.tag,this.view["Canvas/ui/bottom/button2/add/Label"].getComponent(c).string=`${this.stage3}`)}onLoad(){super.onLoad(),m.frameRate=120,p.preloadScene("gamePlay",(()=>{})),this.dataInit()}async dataInit(){this.initGameId();const e=(await U()).result;if(e){const t=[];for(let i in e)t.push(i);t.forEach((t=>{if(e[t]){H.AES.decrypt(e[t],"bc1ptyc7v0hk0w48vqhxf86j7uetu42kf4c5z8nn6llv6f7l2g6cr3nszftf32").toString(H.enc.Utf8).split("").forEach((e=>{const i=P.GUI.urls.find((t=>t.tooTip==e));this.InitializedData.push({...i,level:t}),this.count++}))}}))}1==this.currentLevel?this.initLevel1():this.init2(this.InitializedData)}initLevel1(){const e=this.view["GameSpace/ItemSource"];e.setPosition(0,5,0);P.GUI.urls.slice(1,4).map((t=>{const i=_.Instance.getAsset("GUI",t.path);for(let t=0;t<3;t++){const t=u(i);t.eulerAngles=new d(A(0,360),A(0,360),A(0,360)),t.level=0,this.allItem.push(t),t.getComponent(g).linearDamping=.5,t.getComponent(g).angularDamping=1,t.getComponent(g).mass=6e4,t.getComponent(g).useCCD=!0,e.addChild(t)}}))}async initGameId(){const e=F("user_info"),t=await G({ton_user_id:e.ton_user_id,game_user_id:e.game_user_id});200==t.code&&(this.gameDate=t.result)}onEnable(){v.on(C.EventType.TOUCH_START,this.onTouchStart,this),v.on(C.EventType.TOUCH_END,this.onTouchEnd,this),v.on(C.EventType.TOUCH_MOVE,this.onTouchMove,this),v.on(C.EventType.TOUCH_CANCEL,this.onTouchCancel,this)}onDisable(){v.off(C.EventType.TOUCH_START,this.onTouchStart,this),v.off(C.EventType.TOUCH_END,this.onTouchEnd,this),v.off(C.EventType.TOUCH_MOVE,this.onTouchMove,this),v.on(C.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.unscheduleAllCallbacks()}checkItem(e){return P.GUI.urls.some((t=>t.path==e.name))}onTouchCancel(e){this.setNodeMaterial(this.touchNode,null,!1)}onTouchStart(e){if(window?.Telegram?.WebApp.HapticFeedback.selectionChanged(),this.gameStop)return;const t=e.getLocation(),i=this.node.parent.getChildByName("Main Camera").getComponent(y),n=new w.Ray;if(i?.screenPointToRay(t.x,t.y,n),T.instance.raycastClosest(n,4294967295,1e7,!0)){let e=T.instance.raycastClosestResult.collider;if("NFT"==e.node.name)return e.node.getComponent(N).destoryCollider(),e.node.destroy(),this.gameStop=!0,this.view["Canvas/Over"].active=!0,this.view["Canvas/Over/flied"].active=!1,void(this.view["Canvas/Over/win"].active=!0);if(!this.checkItem(e.node))return;this.setNodeMaterial(e.node,this.material,!0),e.node.getComponent(N).isTemp||(e.node.getComponent(N).setUseGravity(!1),e.node.getComponent(N).setWorldPosition(1)),this.touchNode=e.node,this.clickPlay&&("Chip_Bag"==e.node.name||"ToGo_Bag_W"==e.node.name?E.Instance.play("mdl",{playOnAwake:!0}):"Wreath_Light"==e.node.name||"Loaf_Cinnamon"==e.node.name||"Loaf_White"==e.node.name||"Breakfast_Sandwich"==e.node.name?E.Instance.play("mianbao",{playOnAwake:!0}):"usdc"==e.node.name||"eggcoin"==e.node.name?E.Instance.play("token",{playOnAwake:!0}):E.Instance.play("other",{playOnAwake:!0}))}}setNodeMaterial(e,t,i){void 0===i&&(i=!0),e&&"usdc"!=e.name&&"eggcoin"!=e.name&&"nft"!=e.name&&e.children.forEach((e=>{if(i)e.getComponent(f)&&(this.touchMaterial=e.getComponent(f).materials[0],e.getComponent(f).setMaterial(t,0)),this.setNodeMaterial(e,t,i);else{if(e.getComponent(f)){const t=new s;t.copy(this.touchMaterial),e.getComponent(f).setMaterial(t,0)}this.setNodeMaterial(e,t,i)}}))}onTouchEnd(e){if(this.gameStop)return;if(0==this.allItem.length)return;if(this.collectTiles.length>=7)return;const t=e.getLocation(),i=this.node.parent.getChildByName("Main Camera").getComponent(y),n=new w.Ray;if(i?.screenPointToRay(t.x,t.y,n),T.instance.raycastClosest(n,4294967295,1e7,!0)){let e=T.instance.raycastClosestResult.collider;if(!this.checkItem(e.node))return;if(this.touchNode==e.node){if(e.node.getComponent(N).isTemp||this.touchNode.getComponent(N).setUseGravity(!0),this.setNodeMaterial(this.touchNode,null,!1),2==this.currentLevel&&this.initGravity(),e.node.getComponent(N).isBottom)return;this.chooseItem(this.touchNode)}else this.setNodeMaterial(this.touchNode,null,!1)}else this.setNodeMaterial(this.touchNode,null,!1)}onTouchMove(e){if(this.gameStop)return;if(0==this.allItem.length)return;if(this.collectTiles.length>=7)return;const t=e.getLocation(),i=this.node.parent.getChildByName("Main Camera").getComponent(y),n=new w.Ray;if(i?.screenPointToRay(t.x,t.y,n),T.instance.raycastClosest(n,4294967295,1e7,!0)){let e=T.instance.raycastClosestResult.collider;if(e.node){if(!this.checkItem(e.node))return this.touchNode?.getComponent(N).setUseGravity(!0),void this.setNodeMaterial(this.touchNode,null,!1);if(this.touchNode&&this.touchNode==e.node)return;this.touchNode.getComponent(N).setUseGravity(!0),this.setNodeMaterial(this.touchNode,null,!1),this.setNodeMaterial(e.node,this.material,!0),e.node.getComponent(N).setUseGravity(!1),e.node.getComponent(N).setWorldPosition(1),this.touchNode=e.node}}}chooseItem(e){let t=e.name;if(e.getComponent(N).destoryCollider(),e.getComponent(N).isTemp){for(var i=0;i<this.temporaryItem.length;++i)if(this.temporaryItem[i]==e){this.temporaryItem.splice(i,1);break}}else for(i=0;i<this.allItem.length;++i)if(this.allItem[i]==e){this.allItem.splice(i,1);break}let n=!1;for(i=this.collectTiles.length-1;i>=0;--i)if(this.collectTiles[i].name==t){this.collectTiles.splice(i+1,0,e),n=!0;break}n||this.collectTiles.push(e),this.playAnimationStart(t)}checkResult(e){this.collectTiles.length>=7?(this.gameStop=!0,this.view["Canvas/Over"].active=!0,this.view["Canvas/Over/flied"].active=!0,this.view["Canvas/Over/win"].active=!1,this.isGameOver=!1,this.continue||(this.view["Canvas/Over/flied/continue"].active=!1),this.continue=!1,this.renderFiled()):0==this.collectTiles.length&&0==this.allItem.length&&e&&(1==this.currentLevel?(this.currentLevel=2,this.init2(this.InitializedData)):(this.gameStop=!0,this.view["Canvas/Over"].active=!0,this.view["Canvas/Over/flied"].active=!1,this.view["Canvas/Over/win"].active=!0,this.renderWin(),E.Instance.play("win",{playOnAwake:!0})))}renderFiled(){this.view["Canvas/Over/flied/detail/usdc/Label"].getComponent(c).string=`${this.usdtCount}`,this.view["Canvas/Over/flied/detail/myToken/Label"].getComponent(c).string=`${this.myCoinCount}`,this.view["Canvas/Over/flied/detail/usdc/Label1"].getComponent(c).string=""+0*this.usdtCount,this.view["Canvas/Over/flied/detail/myToken/Label1"].getComponent(c).string=`${Math.floor(this.myCoinCount/2)}`;const e=this.view["Canvas/Over/flied/ProgressBar"].getComponent(b);e.progress=0;const t=1-this.allItem.length/this.count,i=this.view["Canvas/Over/flied/ProgressBar/Bar/USDT/Label"].getComponent(c);I(e).to(.5,{progress:t},{onUpdate:(e,t)=>{i.string=`${Math.floor(100*e.progress)}%`}}).start()}renderWin(){this.view["Canvas/Over/win/detail/usdc/Label"].getComponent(c).string=`${this.usdtCount}`,this.view["Canvas/Over/win/detail/myToken/Label"].getComponent(c).string=`${this.myCoinCount}`}moveToRightPos(){0==this.temporaryItem.length&&this.view.temporary.active&&(this.view.temporary.active=!1),this.collectTiles.map(((e,t)=>{let i=e.getComponent(N);O.stopAllByTarget(e);const n=e.worldPosition,s=this.collectPos[t].clone();let a=new d((n.x+s.x)/2,2*(n.y+s.y),(n.z+s.z)/2);I(e).to(.2,{worldPosition:a}).to(.3,{worldPosition:this.collectPos[t].clone()}).start(),I(e).to(.5,{eulerAngles:i.rotation,scale:i.scale}).call((()=>{i.isBottom=!0,i.removed&&I(e).to(.25,{worldPosition:i.removedPos},{easing:"backIn"}).call((()=>{if(i.playRmovedEff){const t=this.node.parent.getChildByName("Main Camera").getComponent(y).convertToUINode(e.worldPosition,this.view.Canvas);if("usdc"==e.name||"eggcoin"==e.name){this.view["Canvas/ui/tokenani"].active=!0,this.view["Canvas/ui/tokenani"].setPosition(t.x,t.y);const i=this.view["Canvas/ui/tokenani"].getComponent(h.Skeleton),n=e.name;if("usdc"==e.name?i.skeletonData=this.usdc:i.skeletonData=this.coin,i.setAnimation(0,"baozha",!1),i.addAnimation(0,"feichu",!1),"usdc"==n){const e=this.view["Canvas/ui/tokenani"],t=e.getWorldPosition(),i=this.view["Canvas/ui/coinBox/usdcCion"].getWorldPosition();I(e).delay(1.5).to(1,{worldPosition:new d(i.x-350,i.y-t.y,0)}).call((()=>{E.Instance.play("qian",{playOnAwake:!0})})).start()}else{const e=this.view["Canvas/ui/tokenani"],t=e.getWorldPosition(),i=this.view["Canvas/ui/coinBox/eggCion"].getWorldPosition();I(e).delay(1.5).to(1,{worldPosition:new d(i.x-350,i.y-t.y,0)}).call((()=>{E.Instance.play("qian",{playOnAwake:!0})})).start()}}else{this.view["Canvas/ui/animation"].active=!0,this.view["Canvas/ui/animation"].setPosition(t.x,t.y);this.view["Canvas/ui/animation"].getComponent(h.Skeleton).setAnimation(0,"effect",!1)}E.Instance.play("xiaoshi",{playOnAwake:!0}),this.checkResult(!0)}"usdc"==e.name&&(this.usdtCount+=1,this.updateCoinCount()),"eggcoin"==e.name&&(this.myCoinCount+=1,this.updateCoinCount()),e.destroy(),this.moveToRightPos()})).start()})).start()}))}updateCoinCount(){this.view["Canvas/ui/coinBox/eggCion/Label"].getComponent(c).string=`${this.myCoinCount}`,this.view["Canvas/ui/coinBox/usdcCion/Label"].getComponent(c).string=`${this.usdtCount}`}async init2(e){this.view["bottom/bottom/Cone"].getComponent(g).useCCD=!0,this.view["bottom/bottom/Cylinder"].getComponent(g).useCCD=!0;const t=this.view.GameSpace,i=u(this.nft);t.addChild(i),await new Promise((e=>{const t=setTimeout((()=>{clearTimeout(t),e(1)}),60)}));const n=this.view["GameSpace/ItemSource"];n.setPosition(0,80,0),P.GUI.urls.map((e=>{const t=_.Instance.getAsset("GUI",e.path),i=u(t);i.eulerAngles=new d(A(0,360),A(0,360),A(0,360)),i.level=0,this.allItem.push(i),i.getComponent(g).linearDamping=.5,i.getComponent(g).angularDamping=1,i.getComponent(g).mass=6e4,i.getComponent(g).useCCD=!0,n.addChild(i)})),await new Promise((e=>{const t=setTimeout((()=>{clearTimeout(t),e(1)}),20)}));for(let t of e){const e=_.Instance.getAsset("GUI",t.path),i=u(e);i.eulerAngles=new d(A(0,360),A(0,360),A(0,360)),i.level=t.level,this.allItem.push(i),i.getComponent(g).linearDamping=.5,i.getComponent(g).angularDamping=1,i.getComponent(g).mass=6e4,i.getComponent(g).useCCD=!0,await new Promise((e=>{const t=setTimeout((()=>{clearTimeout(t),e(1)}),20)})),n.addChild(i)}this.initTime()}initTime(){this.view["Canvas/ui/time"].active=!0;const e=j().add(6,"minute");this.targetTime=e,this.timeStop=!1,this.schedule(this.updateTime,1);const t=setTimeout((()=>{clearTimeout(t),this.allItem.forEach(((e,t)=>{e.getComponent(g).linearDamping=.2,e.getComponent(g).angularDamping=.1}))}),4e3)}updateTime(){let e;if(this.timeStop)this.timeStopMoment.add(1,"second"),this.targetTime&&(e=D(this.timeStopMoment,this.targetTime));else{const t=j();this.targetTime&&(e=D(t,this.targetTime))}e&&(e?.end?(this.unscheduleAllCallbacks(),this.gameStop=!0,this.view["Canvas/Over"].active=!0,this.view["Canvas/Over/flied"].active=!0,this.view["Canvas/Over/win"].active=!1,this.isGameOver=!0):this.view["Canvas/ui/time/Label"].getComponent(c).string=`${e?.minutes}:${e?.seconds}`)}initGravity(){let e=this.view.targetNode.worldPosition;this.allItem.forEach(((t,i)=>{let n=t.getComponent(g),s=e.subtract(t.worldPosition),a=s.length();s=s.normalize();let o=6e3/Math.max(a,1),l=s.multiplyScalar(o);n.applyForce(l,t.worldPosition)}))}start(){this.continue=!0,this.currentLevel=1,this.usdtCount=0,this.myCoinCount=0,this.changeTag(),this.collectPos=[],this.view.collectnox.children.map((e=>{this.collectPos.unshift(e.worldPosition),e.active=!1})),this.view.temporary.children.map((e=>{this.temporaryPos.push(e.worldPosition),e.active=!1})),this.view.temporary.active=!1,this.view["Canvas/ui/stop"].on(k.EventType.TOUCH_END,(e=>{if(e.propagationStopped=!0,E.Instance.play("djClick",{playOnAwake:!0}),2==this.currentLevel){if(!this.targetTime)return void M("Please wait...");this.timeStopMoment||(this.timeStopMoment=j()),this.unschedule(this.updateTime)}this.view["Canvas/gameOver"].active=!0})),this.view["Canvas/gameOver/mask/close"].on(k.EventType.TOUCH_END,(e=>{e.propagationStopped=!0,E.Instance.play("djClick",{playOnAwake:!0}),this.view["Canvas/gameOver"].active=!1,2==this.currentLevel&&(this.timeStop=!0,this.schedule(this.updateTime,1)),this.gameStop=!1})),this.view["Canvas/gameOver/mask/continue"].on(k.EventType.TOUCH_END,(e=>{e.propagationStopped=!0,E.Instance.play("djClick",{playOnAwake:!0}),this.view["Canvas/gameOver"].active=!1,2==this.currentLevel&&(this.timeStop=!0,this.schedule(this.updateTime,1)),this.gameStop=!1})),this.view["Canvas/gameOver/mask/giveUp"].on(k.EventType.TOUCH_END,(async e=>{e.propagationStopped=!0,E.Instance.play("djClick",{playOnAwake:!0}),await this.submitGameOver("false"),this.view["Canvas/gameOver"].active=!1,this.currentLevel=1,p.loadScene("gamePlay")})),this.view["Canvas/Over/flied/giveUp"].on(k.EventType.TOUCH_END,(async e=>{e.propagationStopped=!0,E.Instance.play("djClick",{playOnAwake:!0}),await this.submitGameOver("false"),this.view["Canvas/Over"].active=!1,this.currentLevel=1,p.loadScene("gamePlay")})),this.view["Canvas/Over/flied/continue"].on(k.EventType.TOUCH_END,(async e=>{e.propagationStopped=!0,E.Instance.play("djClick",{playOnAwake:!0}),this.isGameOver?(await this.submitGameOver("false"),this.view["Canvas/Over"].active=!1,this.currentLevel=1,p.loadScene("gamePlay")):(this.view["Canvas/Over"].active=!1,this.temporaryItem=this.collectTiles.slice(0,this.collectTiles.length),this.temporaryItem.forEach((e=>{e.getComponent(N).isBottom=!1})),this.collectTiles=this.collectTiles.slice(this.collectTiles.length),this.view.temporary.active=!0,this.mvTemporary(),this.gameStop=!1)})),this.view["Canvas/Over/win/continue"].on(k.EventType.TOUCH_END,(async e=>{e.propagationStopped=!0,E.Instance.play("djClick",{playOnAwake:!0}),await this.submitGameOver("true"),this.view["GameSpace/ItemSource"].removeAllChildren(),this.view["Canvas/Over"].active=!1,this.gameStop=!1,this.collectTiles=[],this.currentLevel=1,p.loadScene("gamePlay")})),this.view["Canvas/gameOver/mask/setting/sound/Toggle"].on("toggle",(e=>{E.Instance.play("djClick",{playOnAwake:!0}),e.isChecked?E.Instance.play("bg",{playOnAwake:!0,loop:!0,volume:.4}):E.Instance.stop("bg")})),this.view["Canvas/gameOver/mask/setting/music/Toggle"].on("toggle",(e=>{E.Instance.play("djClick",{playOnAwake:!0}),e.isChecked?this.clickPlay=!0:this.clickPlay=!1})),this.view["Canvas/ui/bottom/button"].on(k.EventType.TOUCH_END,(e=>{if(e.propagationStopped=!0,E.Instance.play("app",{playOnAwake:!0}),0==this.stage1)return this.view["Canvas/BulletFrame"].active=!0,void this.view["Canvas/BulletFrame"].getComponent(L).setType(1);0!=this.collectTiles.length?(this.collectTiles.length>3?(this.temporaryItem=this.collectTiles.slice(0,3),this.collectTiles=this.collectTiles.slice(3)):(this.temporaryItem=this.collectTiles.slice(0,this.collectTiles.length),this.collectTiles=this.collectTiles.slice(this.collectTiles.length)),this.temporaryItem.forEach((e=>{e.getComponent(N).isBottom=!1})),this.view.temporary.active=!0,this.mvTemporary(),this.stage1=0,this.changeTag()):M("No items were collected")})),this.view["Canvas/ui/bottom/button1"].on(k.EventType.TOUCH_END,(e=>{if(e.propagationStopped=!0,E.Instance.play("app",{playOnAwake:!0}),0==this.stage2)return this.view["Canvas/BulletFrame"].active=!0,void this.view["Canvas/BulletFrame"].getComponent(L).setType(2);if(0!=this.collectTiles.length){{let e=this.collectTiles.filter(((e,t)=>this.collectTiles.some(((i,n)=>e.name==i.name&&t!=n))));if(e.length>0){const i=e[0].name,n=[];for(var t=0;t<this.allItem.length;++t)if(this.allItem[t].name==i){n.push(...this.allItem.splice(t,1));break}n.forEach((e=>{let t=!1;for(var i=this.collectTiles.length-1;i>=0;--i)if(this.collectTiles[i].name==e.name){e.getComponent(N).destoryCollider(),e.getComponent(N).setUseGravity(!1),this.collectTiles.splice(i+1,0,e),t=!0;break}t||this.collectTiles.push(e)})),this.playAnimationStart(i)}else{if(!(this.collectTiles.length<6))return void M("Insufficient vacancies");{const e=this.collectTiles[0].name,i=[];for(let n=0;n<2;n++)for(t=0;t<this.allItem.length;++t)if(this.allItem[t].name==e){i.push(...this.allItem.splice(t,1));break}i.forEach((e=>{let t=!1;for(var i=this.collectTiles.length-1;i>=0;--i)if(this.collectTiles[i].name==e.name){e.getComponent(N).destoryCollider(),e.getComponent(N).setUseGravity(!1),this.collectTiles.splice(i+1,0,e),t=!0;break}t||this.collectTiles.push(e)})),this.playAnimationStart(e)}}}this.stage2=0,this.changeTag()}else M("No items were collected")})),this.view["Canvas/ui/bottom/button2"].on(k.EventType.TOUCH_END,(async e=>{if(e.propagationStopped=!0,E.Instance.play("app",{playOnAwake:!0}),0==this.stage3)return this.view["Canvas/BulletFrame"].active=!0,void this.view["Canvas/BulletFrame"].getComponent(L).setType(3);this.shuffle(),this.stage3=0,this.changeTag()})),this.view["Canvas/BulletFrame/mask/Button"].on(k.EventType.TOUCH_END,(async e=>{e.propagationStopped=!0,E.Instance.play("djClick",{playOnAwake:!0});const t=this.view["Canvas/BulletFrame"].getComponent(L);1==t.type?this.stage1=1:2==t.type?this.stage2=1:this.stage3=1;try{await this.buyAndShareItem()}catch(e){return 2==this.currentLevel&&(this.timeStop=!0,this.schedule(this.updateTime,1)),void(1==t.type?this.stage1=0:2==t.type?this.stage2=0:this.stage3=0)}this.changeTag(),t.close()}))}async shuffle(){const e=this.view["GameSpace/ItemSource"];this.allItem=[],e.children.forEach((e=>{e.getComponent(g)&&(this.allItem.push(u(e)),e.destroy())}));for(let t of this.allItem)t.eulerAngles=new d(A(0,360),A(0,360),A(0,360)),t.setPosition(0,0,0),t.getComponent(g).linearDamping=.5,t.getComponent(g).angularDamping=1,await new Promise((e=>{const t=setTimeout((()=>{clearTimeout(t),e(1)}),10)})),e.addChild(t);const t=setTimeout((()=>{clearTimeout(t),this.allItem.forEach(((e,t)=>{e.getComponent(g).linearDamping=.2,e.getComponent(g).angularDamping=.1}))}),4e3)}async submitGameOver(e){await B({game_user_id:this.gameDate.game_user_id,game_id:this.gameDate.game_id,result:e,inside_point:this.myCoinCount,inside_usdt:this.usdtCount,prop_one:this.gameDate.prop_one})}async buyAndShareItem(){if(this.gameDate.prop_one%3==0){2==this.currentLevel&&(this.timeStopMoment||(this.timeStopMoment=j()),this.unschedule(this.updateTime));await x.Instance.sendTransaction(1e-5);2==this.currentLevel&&(this.timeStop=!0,this.schedule(this.updateTime,1))}else{const e="https://t.me/catchItGame_bot/catch_it?startapp=ref_5841411543";window?.Telegram?.WebApp?.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(e)}`)}const e=await R({game_id:this.gameDate.game_id,prop_one:this.gameDate.prop_one});200==e.code&&(this.gameDate.prop_one=e.result.prop_one)}playAnimationStart(e){this.moveToRightPos();let t=this.collectTiles.filter((t=>t.name==e));if(3==t.length)for(var i=this.collectTiles.length-1;i>=0;--i)if(this.collectTiles[i].name==e){let e=this.collectTiles[i];e.getComponent(N).removed=!0,this.collectTiles.splice(i,1),e.getComponent(N).removedPos=t[1].worldPosition,e==t[1]&&(e.getComponent(N).playRmovedEff=!0)}this.checkResult(!1)}mvTemporary(){const e=this.temporaryPos.map((e=>e.clone()));this.temporaryItem.map(((t,i)=>{t.getComponent(N).isTemp=!0;const n=i%3,s=Math.floor(i/3);e[n].y=1==s?3*e[n].y:2==s?5*e[n].y:1*e[n].y,I(t).to(.4,{worldPosition:e[n]}).call((()=>{this.moveToRightPos()})).start()}))}update(e){}}).prototype,"material",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(K.prototype,"tag",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(K.prototype,"add",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(K.prototype,"nft",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(K.prototype,"usdc",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(K.prototype,"coin",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=K))||J));n._RF.pop()}}}));

System.register("chunks:///_virtual/Message.ts",["cc","./UiMgr.ts"],(function(e){var t,s,o,n,c,a;return{setters:[function(e){t=e.cclegacy,s=e.Label,o=e.UIOpacity,n=e.tween,c=e._decorator},function(e){a=e.UICtrl}],execute:function(){var i;t._RF.push({},"51bc7fU8Y9MSYWWLBh/fEe+","Message",void 0);const{ccclass:r,property:u}=c;e("Message",r("Message")(i=class extends a{onLoad(){super.onLoad()}setValue(e,t){this.node.getChildByName("Label").getComponent(s).string=e;const c=this.node.getComponent(o);n(c).to(.6,{opacity:255}).start();const a=setTimeout((()=>{this.node&&(this.node.active=!1,this.node.destroy()),clearTimeout(a)}),t||2e3)}})||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/Play.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiMgr.ts","./GameFiMgr.ts","./index3.ts","./storage.ts","./AudioMgr.ts","./app.ts","./EventMgr.ts"],(function(t){var e,n,i,o,s,a,r,p,c,l,u,g,h,d,v,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.SpriteFrame,s=t._decorator,a=t.director,r=t.Node,p=t.Label,c=t.Sprite},function(t){l=t.UICtrl},function(t){u=t.GameFiMgr},function(t){g=t.getGameUserInfo},function(t){h=t.setStorageData},function(t){d=t.AudioMgr},function(t){v=t.Tost},function(t){m=t.EventMgr}],execute:function(){var w,y,f,b,C,I,_;i._RF.push({},"b4e20UqJq5OtI2vxMRVXJyR","Play",void 0);const{ccclass:L,property:T}=s;t("Play",(w=L("Play"),y=T(o),f=T(o),w((I=e((C=class extends l{constructor(){super(...arguments),this.address="",this.loginInfo=null,this.isLogin=!1,n(this,"active",I,this),n(this,"noActive",_,this)}onLoad(){super.onLoad(),m.Instance.on("wallet",(t=>{t&&(this.address=this.address=t.account.address)})),this.initGame(),a.preloadScene("Main",(()=>{})),this.view.Button.on(r.EventType.TOUCH_END,(async t=>{if(t.propagationStopped=!0,d.Instance.play("djClick",{playOnAwake:!0}),u.Instance.isConnected())if(this.loginInfo)if(this.isLogin)a.loadScene("Main");else if(3-this.loginInfo.play_number==0){const t="https://t.me/catchItGame_bot/catch_it?startapp=ref_5841411543";window?.Telegram?.WebApp?.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(t)}`),this.view["Button/Label"].getComponent(p).string="(1/3)",this.isLogin=!0}else try{await u.Instance.sendTransaction(1e-5);this.view["Button/Label"].getComponent(p).string="(1/3)",this.isLogin=!0}catch(t){}else v("Please connect the wallet first");else window?.Telegram?.WebApp?.showAlert("Please connect the wallet first")})),this.view.Button1.on(r.EventType.TOUCH_END,(async t=>{t.propagationStopped=!0,d.Instance.play("djClick",{playOnAwake:!0});window?.Telegram?.WebApp?.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent("https://t.me/catchItGame_bot/catch_it?startapp=ref_5841411543")}`)})),this.view.Button2.on(r.EventType.TOUCH_END,(async t=>{t.propagationStopped=!0,d.Instance.play("djClick",{playOnAwake:!0}),this.view.RankingList.active=!0})),this.view.Button3.on(r.EventType.TOUCH_END,(async t=>{t.propagationStopped=!0,d.Instance.play("djClick",{playOnAwake:!0}),this.view.prompt.active=!0})),this.view["prompt/close"].on(r.EventType.TOUCH_END,(async t=>{t.propagationStopped=!0,d.Instance.play("djClick",{playOnAwake:!0}),this.view.prompt.active=!1}))}initGame(){this.address=u.Instance.address,u.Instance.isConnected?this.view["Button4/tg"].getComponent(c).spriteFrame=this.active:this.view["Button4/tg"].getComponent(c).spriteFrame=this.noActive,console.log(window?.Telegram?.WebApp.initDataUnsafe),this.loginWeb()}async loginWeb(){const t=await g({user_id_wallet:this.address});200==t.code&&(this.saveResult(t.result),this.loginInfo=t.result,3-this.loginInfo.play_number>0?(this.isLogin=!0,this.view["Button/Label"].getComponent(p).string=`(${3-this.loginInfo.play_number}/3)`):(this.isLogin=!1,3-this.loginInfo.play_number==0?this.view["Button/Vector"].active=!0:this.view["Button/Vector"].active=!1,this.view["Button/Label"].getComponent(p).string="(0/3)"))}saveResult(t){h("user_info",t),this.view["bitcone/eggCoinGroup/Label"].getComponent(p).string=t.points,this.view["bitcone/usdcCoinGroup/Label"].getComponent(p).string=t.usdt_coin}update(t){}}).prototype,"active",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(C.prototype,"noActive",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/RankingList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiMgr.ts","./AudioMgr.ts"],(function(t){var e,i,n,r,o,a,s,c,l,p,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.SpriteFrame,o=t._decorator,a=t.Node,s=t.Sprite,c=t.Label,l=t.Color},function(t){p=t.UICtrl},function(t){u=t.AudioMgr}],execute:function(){var g,h,d,m,v,y,b;n._RF.push({},"901e7Mrb4JON7IHU7slFhlB","RankingList",void 0);const{ccclass:f,property:C}=o;t("RankingList",(g=f("RankingList"),h=C(r),d=C(r),g((y=e((v=class extends p{constructor(){super(...arguments),i(this,"active",y,this),i(this,"current",b,this),this.currentItem=0}onLoad(){super.onLoad(),this.initEvent(!0),this.view.close.on(a.EventType.TOUCH_END,(t=>{t.propagationStopped=!0,u.Instance.play("djClick",{playOnAwake:!0}),this.node.active=!1}))}initEvent(t){this.view.table.children.forEach(((e,i)=>{e.getComponent(s).spriteFrame=this.current,e.getChildByName("Label").getComponent(c).color=new l(255,255,255),this.currentItem==i&&(e.getComponent(s).spriteFrame=this.active,e.getChildByName("Label").getComponent(c).color=new l(200,98,25)),t&&e.on(a.EventType.TOUCH_END,(t=>{t.propagationStopped=!0,this.currentItem=i,this.getRankingList(),u.Instance.play("djClick",{playOnAwake:!0}),this.initEvent(!1)}),this)}))}getRankingList(){}}).prototype,"active",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(v.prototype,"current",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/request.ts",["cc","./config.ts","./ResMgr.ts","./index2.ts","./storage.ts"],(function(t){var e,s,n,a,o,r,i,h;return{setters:[function(t){e=t.cclegacy,s=t.find,n=t.instantiate},function(t){a=t.baseUrl,o=t.baseUrl1},function(t){r=t.ResMgr},function(t){i=t.keyObject},function(t){h=t.getStorageData}],execute:function(){t("default",(function(t){return new Promise(((e,o)=>{let c=s("Canvas");c||(c=s("Mian/Canvas"));const d=r.Instance.getAsset("Sounds","Loading");let u;d&&(u=n(d),c.getChildByName("Loading")||c.addChild(u));const p=new XMLHttpRequest;p.onreadystatechange=function(){if(4==p.readyState&&(200==p.status||201==p.status)){const t=JSON.parse(p.responseText);d&&u.destroy(),e(t)}},p.timeout=t.timeout||5e4;const x=t.method||"GET";let g=a+t.url;if(t.data=t.data,"get"==x||"GET"==x){t.data&&(g=g+"?"+i(t.data)),p.open(x,g,!0);const e=h("token");e&&p.setRequestHeader("token",e),p.setRequestHeader("Content-type","application/json;charset=utf-8"),p.send()}else{p.open(x,g,!0);const e=h("token");e&&p.setRequestHeader("token",e),p.setRequestHeader("Content-type","application/json;charset=utf-8");try{p.send(JSON.stringify(t.data))}catch(t){console.log(t)}}}))})),e._RF.push({},"0b092YOWnRMHZj9czjoyStZ","request",void 0);t("ajax",new class{constructor(){this.xhr=void 0,this.xhr=new XMLHttpRequest,this.xhr.timeout=5e4}get(t,e){return new Promise(((a,c)=>{const d=s("Canvas"),u=r.Instance.getAsset("GUI","component/Loading"),p=n(u);d.getChildByName("Loading")||d.addChild(p),this.xhr.onreadystatechange=()=>{if(4==this.xhr.readyState&&200==this.xhr.status){const t=JSON.parse(this.xhr.responseText);p.destroy(),a(t)}};let x=o+t;e&&e&&(x=x+"?"+i(e)),this.xhr.open("GET",x,!0);const g=h("token");g&&this.xhr.setRequestHeader("token",g),this.xhr.setRequestHeader("Content-type","application/json;charset=utf-8"),this.xhr.send()}))}post(t,e){return new Promise(((s,n)=>{this.xhr.onreadystatechange=()=>{if(4==this.xhr.readyState&&201==this.xhr.status){const t=JSON.parse(this.xhr.responseText);s(t)}};let a=o+t;this.xhr.open("POST",a,!0);const r=h("token");r&&this.xhr.setRequestHeader("token",r),this.xhr.setRequestHeader("Content-type","application/json;charset=utf-8"),this.xhr.send(JSON.stringify(e))}))}});e._RF.pop()}}}));

System.register("chunks:///_virtual/ResMgr.ts",["cc"],(function(s){var t,e,o,n,r;return{setters:[function(s){t=s.cclegacy,e=s.Component,o=s.assetManager,n=s.SpriteFrame,r=s.SpriteAtlas}],execute:function(){t._RF.push({},"87881hT1qdLp79gFpPIDHKe","ResMgr",void 0);class l extends e{constructor(){super(...arguments),this.totalAb=0,this.nowAb=0,this.total=0,this.now=0,this.abBUnds={},this.progressFun=null,this.endFun=null}onLoad(){l.Instance?this.destroy():l.Instance=this}preloadResourcePkg(s,t,e){this.totalAb=0,this.nowAb=0,this.total=0,this.now=0,this.progressFun=t,this.endFun=e;for(let t in s)this.totalAb++,this.total+=s[t].urls.length;for(let t in s)this.loadAssetBundle(t,(()=>{this.nowAb++,this.nowAb==this.totalAb&&this.loadAssetsInAssetBundle(s)}))}preloadResourcePkgAny(s,t,e){this.totalAb=0,this.nowAb=0,this.total=0,this.now=0,this.progressFun=t,this.endFun=e;for(let t in s)this.totalAb++,this.total+=s[t].urls.length;for(let t in s)o.preloadAny(s[t].urls,((s,t,e)=>{this.nowAb++,this.now+=s,this.progressFun&&this.progressFun(this.now,this.total)}),((s,t)=>{s&&console.error("预加载失败"),this.endFun&&this.endFun()}))}loadAssetsInAssetBundle(s){for(let t in s){s[t].urls.forEach((s=>{this.loadRes(this.abBUnds[t],s.path,s.assetType)}))}}loadRes(s,t,e){s.load(t,e,((s,o)=>{this.now++,e.name,s&&(console.error(s),console.error("load res err "+t)),this.progressFun&&this.progressFun(this.now,this.total),this.now>=this.total&&this.endFun&&this.endFun()}))}loadAssetBundle(s,t){o.loadBundle(s,((e,o)=>{e?console.error("load loadAssetBundle error"+s):this.abBUnds[s]=o,t&&t()}))}unloadResourcePkg(s){for(let t in s)o.removeBundle(this.abBUnds[t])}getAsset(s,t,e){const r=o.getBundle(s);r||console.error("getBundle err !!!"),r.load(t,n,((s,t)=>{}));const l=r.get(t);return l||r.load(t,n,((s,t)=>{e&&e(t)})),l}getPlistAsset(s,t,e){const n=o.getBundle(s);n||console.error("getBundle err !!!"),n.load(t,r,((s,o)=>{s&&console.error("load res err "+t),e&&e(o)}))}}s("ResMgr",l),l.Instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/Start.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResMgr.ts","./GameFiMgr.ts","./index.ts","./UiMgr.ts","./AudioMgr.ts"],(function(e){var t,a,n,o,r,i,s,c,l,p,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Node,r=e._decorator,i=e.director,s=e.ProgressBar},function(e){c=e.ResMgr},function(e){l=e.GameFiMgr},function(e){p=e.resPkg},function(e){u=e.UICtrl},function(e){d=e.AudioMgr}],execute:function(){var g,y,f,h,v;n._RF.push({},"56e26DaluZGB6fS6NaTOueI","Start",void 0);const{ccclass:m,property:w}=r;e("Start",(g=m("Start"),y=w(o),g((v=t((h=class extends u{constructor(){super(...arguments),a(this,"GameData",v,this),this.isLogin=!1,this.address="",this.loginInfo=null}onLoad(){super.onLoad(),i.addPersistRootNode(this.GameData),this.view.paly.on(o.EventType.TOUCH_END,(e=>{e.propagationStopped=!0,d.Instance.play("djClick",{playOnAwake:!0}),i.loadScene("gamePlay")})),this.view.connectWallet.on(o.EventType.TOUCH_END,(e=>{e.propagationStopped=!0,d.Instance.play("djClick",{playOnAwake:!0}),l.Instance.openModal()})),this.view.switchWallet.on(o.EventType.TOUCH_END,(e=>{e.propagationStopped=!0,d.Instance.play("djClick",{playOnAwake:!0}),l.Instance.openModal()}))}async initGameDataInfo(){}start(){c.Instance.preloadResourcePkg(p,((e,t)=>{this.view["pbar/ProgressBar"].getComponent(s).progress=e/t}),(async()=>{try{this.view.pbar.active=!1,d.Instance.play("bg",{playOnAwake:!0,loop:!0,volume:.2}),i.loadScene("gamePlay")}catch(e){console.log(e)}}))}}).prototype,"GameData",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/storage.ts",["cc"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy,a=e.sys}],execute:function(){t._RF.push({},"28fccWncOFOiruMdj4PtvaN","storage",void 0);e("setStorageData",((e,t)=>{a.localStorage.setItem(e,JSON.stringify(t))})),e("getStorageData",(e=>a.localStorage.getItem(e)?JSON.parse(a.localStorage.getItem(e)):null)),e("removeStorageData",(e=>{a.localStorage.removeItem(e)})),e("clearStorageData",(()=>{a.localStorage.clear()}));t._RF.pop()}}}));

System.register("chunks:///_virtual/type.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c05a00xUqVKorvfx9AXhENp","type",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/UiMgr.ts",["cc"],(function(e){var n,o,t;return{setters:[function(e){n=e.cclegacy,o=e.Component,t=e.Button}],execute:function(){n._RF.push({},"0347bkkmf9Lwpk/Cdl/7Fvq","UiMgr",void 0);e("UICtrl",class extends o{constructor(){super(...arguments),this.view={}}onLoad(){this.load_all_node(this.node,"")}load_all_node(e,n){for(let o=0;o<e.children.length;o++)this.view[n+e.children[o].name]=e.children[o],this.load_all_node(e.children[o],n+e.children[o].name+"/")}addButtonListener(e,n,o){const r=this.view[e];if(r){r.getComponent(t)?r.on(t.EventType.CLICK,o,n):console.error(e+"Component not found")}else console.error(e+"node not found")}}),n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});